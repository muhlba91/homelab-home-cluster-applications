---
ingress:
  host: traefik.dev.internal.muehlbachler.io
  annotations:
    cert-manager.io/cluster-issuer: cluster-issuer-internal-muehlbachler-io
    external-dns.alpha.kubernetes.io/provider: internal
    traefik.ingress.kubernetes.io/router.tls: "true"

traefik:
  fullnameOverride: traefik

  providers:
    kubernetesIngress:
      publishedService:
        enabled: true

  additionalArguments:
    - "--serversTransport.insecureSkipVerify=true"
    - "--providers.kubernetesingress.allowexternalnameservices=true"
    - "--providers.kubernetesingress.allowEmptyServices=true"

  ports:
    traefik:
      expose: true
    web:
      redirectTo:
        port: websecure

  service:
    ipFamilyPolicy: PreferDualStack
    spec:
      externalTrafficPolicy: Local
    annotations:
      metallb.universe.tf/loadBalancerIPs: "10.0.220.30,2a01:aea0:dd3:25a:f000:21:30"

  resources:
    requests:
      cpu: 50m
      memory: 96Mi
    limits:
      cpu: 500m
      memory: 256Mi
