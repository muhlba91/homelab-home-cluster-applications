---
apiVersion: v1
kind: ConfigMap
metadata:
  name: frigate-scripts
data:
  download_models.sh: |
    #!/bin/sh
    set -euo pipefail

    apk add --no-cache s3cmd

    S3_ASSETS_BUCKET_DOWNLOAD_PATH="$${S3_ASSETS_BUCKET}/$${S3_ASSETS_BUCKET_PATH}/models"
    s3cmd --access_key=$${GCS_ACCESS_KEY_ID} --secret_key="$${GCS_SECRET_ACCESS_KEY}" --host="https://storage.googleapis.com" --host-bucket="https://storage.googleapis.com" --recursive --force get s3://$${S3_ASSETS_BUCKET_DOWNLOAD_PATH}/ /models/
