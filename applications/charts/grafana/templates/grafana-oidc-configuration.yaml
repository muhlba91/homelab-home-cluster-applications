---
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-oidc-configuration
data:
  oidc-toml: |
    verbose_logging = false

    name = Tuxnet
    icon = cloud

    scopes = openid email profile

    auth_url = "${OIDC_AUTHZ_URL}"
    token_url = "${OIDC_TOKEN_URL}"
    api_url = "${OIDC_USER_INFO_URL}"
    client_id = "${OIDC_CLIENT_ID}"
    client_secret = "${OIDC_CLIENT_SECRET}"

    # allowed_groups = ["{{ .Values.oidc.groups.admin }}"]
    role_attribute_path = contains(groups[*], '{{ .Values.oidc.groups.admin }}') && 'Admin' || 'Viewer'
