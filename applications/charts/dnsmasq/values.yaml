---
internalDomain: internal.muehlbachler.io
dns:
  ipv4: 10.0.220.10
  ipv6: 2a01:aea0:dd3:25a:f000:21:10

network:
  leaseTime: 48h
  renewTime: 24h
  rebindTime: 42h
  ipv4:
    cidr: 10.0.0.0/16
    router: 10.0.0.1
    defaultPool:
      startAddress: 10.0.150.1
      endAddress: 10.0.199.255
      netmask: 255.255.0.0
  ipv6:
    cidr: 2a01:aea0:dd3:25a::/64
    router: 2a01:aea0:dd3:25a::1
    informationRefreshTime: 6h
    defaultPool:
      startAddress: 2a01:aea0:dd3:25a:e000::1
      endAddress: 2a01:aea0:dd3:25a:e000::ffff
      prefixLength: 64

reservations:
  - hostname: omada-controller
    hwAddress: 10:27:f5:a2:07:58
    ipv4: 10.0.21.1
    ipv6: 2a01:aea0:dd3:25a:0:3:2:1
  - hostname: omada-living-room
    hwAddress: 90:9a:4a:93:70:26
    ipv4: 10.0.21.11
    ipv6: 2a01:aea0:dd3:25a:0:3:2:11
  - hostname: omada-office
    hwAddress: 5c:62:8b:ce:b3:d4
    ipv4: 10.0.21.12
    ipv6: 2a01:aea0:dd3:25a:0:3:2:12
  - hostname: nuki-bridge
    hwAddress: fc:f5:c4:13:00:50
    ipv4: 10.0.100.1
    ipv6: 2a01:aea0:dd3:25a:2000:1:1:1
  - hostname: ring-chime
    hwAddress: 34:3e:a4:00:19:e1
    ipv4: 10.0.101.1
    ipv6: 2a01:aea0:dd3:25a:2000:1:2:1
  - hostname: ring-doorbell
    hwAddress: 54:e0:19:f3:02:97
    ipv4: 10.0.101.2
    ipv6: 2a01:aea0:dd3:25a:2000:1:2:2
  - hostname: ring-alarm-base
    hwAddress: b0:09:da:32:14:67
    ipv4: 10.0.101.3
    ipv6: 2a01:aea0:dd3:25a:2000:1:2:3
  - hostname: ring-indoor-cam-1
    hwAddress: 54:e0:19:a9:46:4e
    ipv4: 10.0.101.4
    ipv6: 2a01:aea0:dd3:25a:2000:1:2:4
  - hostname: amazon-echo-show-office
    hwAddress: 10:96:93:7d:4f:e0
    ipv4: 10.0.110.1
    ipv6: 2a01:aea0:dd3:25a:2000:2:1:1
  - hostname: amazon-echo-dot-clock-living-room
    hwAddress: c8:6c:3d:0a:46:b4
    ipv4: 10.0.110.2
    ipv6: 2a01:aea0:dd3:25a:2000:2:1:2
  - hostname: amazon-echo-dot-bathroom
    hwAddress: 3a:af:b3:8a:57:3f
    ipv4: 10.0.110.3
    ipv6: 2a01:aea0:dd3:25a:2000:2:1:3
  - hostname: amazon-echo-show-living-room
    hwAddress: 94:3a:91:24:b1:de
    ipv4: 10.0.110.4
    ipv6: 2a01:aea0:dd3:25a:2000:2:1:4
  - hostname: onyx
    hwAddress: 84:85:0a:00:0a:4c
    duid: 00:02:00:00:ab:11:21:d7:59:d6:f5:1f:73:9b
    ipv4: 10.0.111.1
    ipv6: 2a01:aea0:dd3:25a:2000:2:2:1
  - hostname: pv-inverter
    hwAddress: 6c:1d:eb:6d:00:c9
    ipv4: 10.0.111.2
    ipv6: 2a01:aea0:dd3:25a:2000:2:2:2
  - hostname: energy-meter
    hwAddress: 58:cf:79:9b:4b:da
    ipv4: 10.0.111.3
    ipv6: 2a01:aea0:dd3:25a:2000:2:2:3
  - hostname: ecowitt-gateway
    hwAddress: bc:ff:4d:0f:fe:df
    ipv4: 10.0.111.4
    ipv6: 2a01:aea0:dd3:25a:2000:2:2:4
  - hostname: shelly-plug-tech-hub
    hwAddress: 3c:e9:0e:d7:26:7c
    ipv4: 10.0.112.1
    ipv6: 2a01:aea0:dd3:25a:2000:2:3:1
  - hostname: shelly-plug-office-desk-daniel
    hwAddress: 80:64:6f:81:08:36
    ipv4: 10.0.112.2
    ipv6: 2a01:aea0:dd3:25a:2000:2:3:2
  - hostname: shelly-plug-office-desk-kasia
    hwAddress: 3c:e9:0e:d7:cc:7a
    ipv4: 10.0.112.3
    ipv6: 2a01:aea0:dd3:25a:2000:2:3:3
  - hostname: denon-living-room
    hwAddress: 00:05:cd:c6:cf:0e
    ipv4: 10.0.120.1
    ipv6: 2a01:aea0:dd3:25a:2000:3:1:1
  - hostname: apple-tv-living-room
    hwAddress: a8:51:ab:15:c3:98
    duid: 00:01:00:01:2c:84:b9:ef:a8:51:ab:15:c3:98
    ipv4: 10.0.120.2
    ipv6: 2a01:aea0:dd3:25a:2000:3:1:2
  - hostname: xiaomi-mi-projector
    hwAddress: 20:50:e7:03:b9:82
    ipv4: 10.0.120.3
    ipv6: 2a01:aea0:dd3:25a:2000:3:1:3
  - hostname: broadlink-irrf-1
    hwAddress: 24:df:a7:f1:1b:35
    ipv4: 10.0.121.1
    ipv6: 2a01:aea0:dd3:25a:2000:3:2:1
  - hostname: hp-printer
    hwAddress: 30:e1:71:b0:64:a3
    duid: 00:03:00:01:30:e1:71:b0:64:a3
    ipv4: 10.0.130.1
    ipv6: 2a01:aea0:dd3:25a:2000:4:1:1

app-template:
  global:
    fullnameOverride: dnsmasq

  controllers:
    main:
      type: statefulset
      containers:
        main:
          image:
            repository: quay.io/ricardbejarano/dnsmasq
            pullPolicy: IfNotPresent
            tag: "2.89"

          args:
            - --keep-in-foreground
            - --log-facility=-

          securityContext:
            runAsUser: 0
            capabilities:
              add:
                - NET_ADMIN

          resources:
            requests:
              cpu: 5m
              memory: 4Mi
            limits:
              cpu: 10m
              memory: 12Mi

          # TODO: enable probes correctly
          probes:
            liveness:
              enabled: false
            readiness:
              enabled: false
            startup:
              enabled: false

  serviceAccount:
    create: true

  defaultPodOptions:
    automountServiceAccountToken: false
    hostNetwork: true

  service:
    main:
      ipFamilyPolicy: PreferDualStack
      ports:
        http:
          enabled: false
        dhcp4:
          enabled: true
          port: 67
          protocol: UDP
          targetPort: 67
        dhcp6:
          enabled: true
          port: 547
          protocol: UDP
          targetPort: 547

  persistence:
    dhcp4:
      enabled: true
      type: configMap
      name: dnsmasq-config
      globalMounts:
        - path: /etc/dnsmasq.conf
          subPath: dnsmasq.conf
    tmp:
      enabled: true
      type: emptyDir
    run:
      enabled: true
      type: emptyDir
      globalMounts:
        - path: /var/run
